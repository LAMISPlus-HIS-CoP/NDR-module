(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{345:function(e,t,a){e.exports=a(443)},350:function(e,t,a){},443:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(16),l=a.n(c),o=(a(350),a(189)),i=a(33),s=a(69),u=a(341),f=a(281),d=a(313),m=a(319),g=a(311),p=a(101),b=a(239),E=a(270),h=a(136),O=a.n(h),j=a(320),w=a(209),y=a(244),x=a(245),v=a(287),R=a(286),S=a(285),k=a(321),C=a(190),F=a.n(C),z=new URLSearchParams(window.location.search).get("jwt"),N="/api/",P=a(451),T=a(452),D=a(455),G=a(453),A=a(266),B=a(284),L=a(324),I=a.n(L),M=a(456),U=a(454),W=a(198),J=(a(369),a(370),Object(f.a)(function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,"& > * + *":{marginTop:e.spacing(2)}}}}));function H(e){Object(i.f)();var t=J(),a=Object(n.useState)([]),c=Object(s.a)(a,2),l=c[0],o=c[1],u=Object(n.useState)(!1),f=Object(s.a)(u,2),d=f[0],m=f[1],g=Object(n.useState)({facilities:[]}),p=Object(s.a)(g,2),b=p[0],E=(p[1],r.a.useState([])),h=Object(s.a)(E,2),C=h[0],L=h[1],H=Object(n.useState)(null),V=Object(s.a)(H,2),_=(V[0],V[1]),q=Object(n.useState)(!1),K=Object(s.a)(q,2),Q=K[0],X=K[1],Y=function(){return X(!Q)};function Z(){return(Z=Object(w.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:F.a.get("".concat(N,"account"),{headers:{Authorization:"Bearer ".concat(z)}}).then(function(e){_(e.data),o(e.data.applicationUserOrganisationUnits)}).catch(function(e){});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(n.useEffect)(function(){!function(){Z.apply(this,arguments)}()},[]);var $=function(e){return function(){var t=C.indexOf(e),a=Object(j.a)(C);-1===t?a.push(e):a.splice(t,1),L(a)}};return r.a.createElement("div",null,r.a.createElement(W.a,{autoClose:3e3,hideProgressBar:!0}),r.a.createElement(P.a,null,r.a.createElement(T.a,null,C.length>=1?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{color:"primary",variant:"contained",className:" float-right mr-1",size:"large",hidden:d,onClick:function(){return function(){m(!0),Y();var t=[];C.forEach(function(e){delete e.id,delete e.applicationUserId,delete e.archived,t.push(e)}),b.facilities=t,F.a.post("".concat(N,"ndr/generate"),b,{headers:{Authorization:"Bearer ".concat(z)}}).then(function(t){W.b.success(" Generating NDR Successful!"),e.history.push("/generate",{state:"download"})}).catch(function(e){if(X(!1),m(!1),e.response&&e.response.data){var t=e.response.data.apierror&&""!==e.response.data.apierror.message?e.response.data.apierror.message:"Something went wrong, please try again";W.b.error(t)}else W.b.error("Something went wrong. Please try again...")})}()}},r.a.createElement(A.a,null)," \xa0\xa0",r.a.createElement("span",{style:{textTransform:"capitalize"}}," Generate Messages"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{color:"primary",variant:"contained",className:" float-right mr-1",size:"large",disabled:"true"},r.a.createElement(A.a,null)," \xa0\xa0",r.a.createElement("span",{style:{textTransform:"capitalize"}}," Generate Messages "))),r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(D.a,{severity:"info"},r.a.createElement(G.a,null,"Info"),"Please check the Facilities you want"),r.a.createElement("br",null),r.a.createElement(y.a,{dense:!0,className:t.root},r.a.createElement("br",null),l.map(function(e){var t="checkbox-list-secondary-label-".concat(e.id);return r.a.createElement(x.a,{key:e.id,button:!0},r.a.createElement(S.a,null,r.a.createElement(I.a,null)),r.a.createElement(R.a,{id:t,primary:"".concat(e.organisationUnitName)}),r.a.createElement(v.a,null,r.a.createElement(k.a,{edge:"end",onChange:$(e),checked:-1!==C.indexOf(e),inputProps:{"aria-labelledby":t}})))}))))),r.a.createElement(M.a,{isOpen:Q,toggle:Y,backdrop:!1,fade:!0,style:{marginTop:"250px"}},r.a.createElement(U.a,null,r.a.createElement("h2",null,"Generating NDR Please wait..."))))}var V=a(246),_=a.n(V),q=a(297),K=a(243),Q=a(340),X=a.n(Q),Y=a(327),Z=a.n(Y),$=a(337),ee=a.n($),te=a(328),ae=a.n(te),ne=a(335),re=a.n(ne),ce=a(269),le=a.n(ce),oe=a(268),ie=a.n(oe),se=a(329),ue=a.n(se),fe=a(330),de=a.n(fe),me=a(332),ge=a.n(me),pe=a(333),be=a.n(pe),Ee=a(334),he=a.n(Ee),Oe=a(338),je=a.n(Oe),we=a(331),ye=a.n(we),xe=a(336),ve=a.n(xe),Re=a(339),Se=a.n(Re),ke={Add:Object(n.forwardRef)(function(e,t){return r.a.createElement(Z.a,Object.assign({},e,{ref:t}))}),Check:Object(n.forwardRef)(function(e,t){return r.a.createElement(ae.a,Object.assign({},e,{ref:t}))}),Clear:Object(n.forwardRef)(function(e,t){return r.a.createElement(ie.a,Object.assign({},e,{ref:t}))}),Delete:Object(n.forwardRef)(function(e,t){return r.a.createElement(ue.a,Object.assign({},e,{ref:t}))}),DetailPanel:Object(n.forwardRef)(function(e,t){return r.a.createElement(le.a,Object.assign({},e,{ref:t}))}),Edit:Object(n.forwardRef)(function(e,t){return r.a.createElement(de.a,Object.assign({},e,{ref:t}))}),Export:Object(n.forwardRef)(function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))}),Filter:Object(n.forwardRef)(function(e,t){return r.a.createElement(ge.a,Object.assign({},e,{ref:t}))}),FirstPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(be.a,Object.assign({},e,{ref:t}))}),LastPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(he.a,Object.assign({},e,{ref:t}))}),NextPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(le.a,Object.assign({},e,{ref:t}))}),PreviousPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(re.a,Object.assign({},e,{ref:t}))}),ResetSearch:Object(n.forwardRef)(function(e,t){return r.a.createElement(ie.a,Object.assign({},e,{ref:t}))}),Search:Object(n.forwardRef)(function(e,t){return r.a.createElement(ve.a,Object.assign({},e,{ref:t}))}),SortArrow:Object(n.forwardRef)(function(e,t){return r.a.createElement(ee.a,Object.assign({},e,{ref:t}))}),ThirdStateCheck:Object(n.forwardRef)(function(e,t){return r.a.createElement(je.a,Object.assign({},e,{ref:t}))}),ViewColumn:Object(n.forwardRef)(function(e,t){return r.a.createElement(Se.a,Object.assign({},e,{ref:t}))})},Ce=Object(f.a)(function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,"& > * + *":{marginTop:e.spacing(2)}}}});function Fe(){Ce();var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(""),l=Object(s.a)(c,2),i=l[0];l[1];function u(){return(u=Object(w.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:F.a.get("".concat(N,"ndr/download"),{headers:{Authorization:"Bearer ".concat(z)}}).then(function(e){a(e.data.fileInfos),console.log(e.data.fileInfos)}).catch(function(e){});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(n.useEffect)(function(){!function(){u.apply(this,arguments)}()},[]),r.a.createElement("div",null,r.a.createElement(P.a,null,r.a.createElement(T.a,null,r.a.createElement(_.a,{icons:ke,title:"List of Filies Generated",columns:[{title:"Facility Name",field:"name",filtering:!1},{title:"Number of Files Generated",field:"files",filtering:!1},{title:"Date Last Generated",field:"date",type:"date",filtering:!1},{title:"Action",field:"actions",filtering:!1}],isLoading:i,data:[].map(function(e){return{name:e.name,files:e.numberRecords,date:e.dateGenerated,actions:r.a.createElement(o.b,{to:e.url+"/"+e.name,target:"_blank",download:!0},r.a.createElement(q.a,{title:"Download"},r.a.createElement(K.a,{"aria-label":"Download"},r.a.createElement(X.a,{color:"primary"}))))}}),options:{pageSizeOptions:[5,10,50,100,150,200],headerStyle:{backgroundColor:"#014d88",color:"#fff",margin:"auto"},filtering:!0,searchFieldStyle:{width:"300%",margingLeft:"250px"},exportButton:!0,searchFieldAlignment:"left"}}))))}function ze(e){var t=e.children,a=e.value,n=e.index,c=Object(u.a)(e,["children","value","index"]);return r.a.createElement(p.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"scrollable-force-tabpanel-".concat(n),"aria-labelledby":"scrollable-force-tab-".concat(n)},c),a===n&&r.a.createElement(b.a,{p:5},t))}function Ne(e){return{id:"scrollable-force-tab-".concat(e),"aria-controls":"scrollable-force-tabpanel-".concat(e)}}var Pe=Object(f.a)(function(e){return{root2:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,margin:e.spacing(7),bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:12},pos:{fontSize:11},cardContent:{padding:2},cardroot:{margin:e.spacing(1),height:"250px !important"}},alertmsge:{marginTop:e.spacing(2)},rootaccordia:{width:"100%"},accordiaheading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},allergiesroot:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}},checkboxroot:{display:"flex"},formControl:{margin:e.spacing(3)},root:{"& .MuiTextField-root":{margin:e.spacing(1),width:200}},formroot:{"& .MuiTextField-root":{margin:e.spacing(1),width:200}},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"33.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:e.spacing(1,2)},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}},inforoot:{width:"95%",margin:20,backgroundColor:"#eee"}}}),Te=function(e){var t=Pe(),a=Object(n.useState)(0),c=Object(s.a)(a,2),l=c[0],o=c[1],i=function(e,t){var a=t,n=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(a);return n?n[1]:null}("tab",e.location),u=null!==i?i:e.location;Object(n.useEffect)(function(){switch(u){case"generate":return o(0);case"download":return o(1);default:return o(0)}},[i]);return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.inforoot}),r.a.createElement(d.a,{position:"static",style:{backgroundColor:"#014d88"}},r.a.createElement(m.a,{value:l,onChange:function(e,t){o(t)},variant:"scrollable",scrollButtons:"on",indicatorColor:"secondary",textColor:"inherit","aria-label":"scrollable force tabs example"},r.a.createElement(g.a,Object.assign({className:t.title,label:"Generate Messages ",icon:r.a.createElement(E.b,null)},Ne(0))),r.a.createElement(g.a,Object.assign({className:t.title,label:"Download Files",icon:r.a.createElement(E.a,null)},Ne(1)))),r.a.createElement("div",null)),r.a.createElement(ze,{value:l,index:0},r.a.createElement(H,null)),r.a.createElement(ze,{value:l,index:1},r.a.createElement(Fe,null)))};function De(){return r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/"},r.a.createElement(Ge,null)))))}function Ge(){return r.a.createElement(Te,null)}a(442);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(De,null)),document.getElementById("root"))}},[[345,1,2]]]);
//# sourceMappingURL=main.ec36c551.chunk.js.map