(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{345:function(e,t,a){e.exports=a(445)},352:function(e,t,a){},445:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(16),l=a.n(c),o=(a(352),a(190)),i=a(34),s=a(59),u=a(342),f=a(281),d=a(313),m=a(319),g=a(311),p=a(101),b=a(240),E=a(271),h=a(137),O=a.n(h),j=a(320),w=a(210),y=a(245),x=a(246),v=a(287),R=a(286),k=a(285),S=a(321),C=a(191),F=a.n(C),z=new URLSearchParams(window.location.search).get("jwt"),N="/api/v1/",T=a(453),P=a(454),D=a(458),A=a(455),L=a(267),G=a(284),U=a(324),B=a.n(U),I=a(459),M=a(456),W=a(199),J=(a(371),a(372),Object(f.a)(function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,"& > * + *":{marginTop:e.spacing(2)}}}}));function _(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2),c=(a[0],a[1],Object(i.f)(),J()),l=Object(n.useState)([]),o=Object(s.a)(l,2),u=o[0],f=o[1],d=Object(n.useState)(!1),m=Object(s.a)(d,2),g=m[0],p=m[1],b=Object(n.useState)({facilities:[]}),E=Object(s.a)(b,2),h=E[0],C=(E[1],r.a.useState([])),U=Object(s.a)(C,2),_=U[0],H=U[1],V=Object(n.useState)(null),q=Object(s.a)(V,2),K=(q[0],q[1]),Q=Object(n.useState)(!1),X=Object(s.a)(Q,2),Y=X[0],Z=X[1];function $(){return($=Object(w.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:F.a.get("".concat(N,"account"),{headers:{Authorization:"Bearer ".concat(z)}}).then(function(e){K(e.data),f(e.data.applicationUserOrganisationUnits)}).catch(function(e){});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(n.useEffect)(function(){!function(){$.apply(this,arguments)}()},[]);var ee=function(e){return function(){var t=_.indexOf(e),a=Object(j.a)(_);-1===t?a.push(e):a.splice(t,1),H(a)}};return r.a.createElement("div",null,r.a.createElement(W.a,{autoClose:3e3,hideProgressBar:!0}),r.a.createElement(T.a,null,r.a.createElement(P.a,null,_.length>=1?r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{color:"primary",variant:"contained",className:" float-right mr-1",size:"large",hidden:g,onClick:function(){return function(){p(!0),Z(!0);var e="";_.forEach(function(t){var a=t.organisationUnitId;e="facilityIds="+a}),h.facilities=e,F.a.get("".concat(N,"ndr/generate?").concat(e),{headers:{Authorization:"Bearer ".concat(z)}}).then(function(e){window.setTimeout(function(){W.b.success(" Generating NDR Successful!"),Z(!1)},5e3)}).catch(function(e){if(Z(!1),p(!1),e.response&&e.response.data){var t=e.response.data.apierror&&""!==e.response.data.apierror.message?e.response.data.apierror.message:"Something went wrong, please try again";W.b.error(t)}else W.b.error("Something went wrong. Please try again...")})}()}},r.a.createElement(L.a,null)," \xa0\xa0",r.a.createElement("span",{style:{textTransform:"capitalize"}}," Generate Messages"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a,{color:"primary",variant:"contained",className:" float-right mr-1",size:"large",disabled:"true"},r.a.createElement(L.a,null)," \xa0\xa0",r.a.createElement("span",{style:{textTransform:"capitalize"}}," Generate Messages "))),r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null)," ",r.a.createElement("br",null),r.a.createElement(D.a,{severity:"info"},r.a.createElement(A.a,null,"Info"),"Please check the Facilities you want"),r.a.createElement("br",null),r.a.createElement(y.a,{dense:!0,className:c.root},r.a.createElement("br",null),u.map(function(e){var t="checkbox-list-secondary-label-".concat(e.id);return r.a.createElement(x.a,{key:e.id,button:!0},r.a.createElement(k.a,null,r.a.createElement(B.a,null)),r.a.createElement(R.a,{id:t,primary:"".concat(e.organisationUnitName)}),r.a.createElement(v.a,null,r.a.createElement(S.a,{edge:"end",onChange:ee(e),checked:-1!==_.indexOf(e),inputProps:{"aria-labelledby":t}})))}))))),r.a.createElement(I.a,{isOpen:Y,toggle:function(){return Z(!Y)},backdrop:!1,fade:!0,style:{marginTop:"250px"},size:"lg"},r.a.createElement(M.a,null,r.a.createElement("h2",null,"Generating NDR File. Please wait..."))))}var H=a(247),V=a.n(H),q=a(297),K=a(244),Q=a(341),X=a.n(Q),Y=a(340),Z=a(457),$=a(327),ee=a.n($),te=a(337),ae=a.n(te),ne=a(328),re=a.n(ne),ce=a(335),le=a.n(ce),oe=a(270),ie=a.n(oe),se=a(269),ue=a.n(se),fe=a(329),de=a.n(fe),me=a(330),ge=a.n(me),pe=a(332),be=a.n(pe),Ee=a(333),he=a.n(Ee),Oe=a(334),je=a.n(Oe),we=a(338),ye=a.n(we),xe=a(331),ve=a.n(xe),Re=a(336),ke=a.n(Re),Se=a(339),Ce=a.n(Se),Fe={Add:Object(n.forwardRef)(function(e,t){return r.a.createElement(ee.a,Object.assign({},e,{ref:t}))}),Check:Object(n.forwardRef)(function(e,t){return r.a.createElement(re.a,Object.assign({},e,{ref:t}))}),Clear:Object(n.forwardRef)(function(e,t){return r.a.createElement(ue.a,Object.assign({},e,{ref:t}))}),Delete:Object(n.forwardRef)(function(e,t){return r.a.createElement(de.a,Object.assign({},e,{ref:t}))}),DetailPanel:Object(n.forwardRef)(function(e,t){return r.a.createElement(ie.a,Object.assign({},e,{ref:t}))}),Edit:Object(n.forwardRef)(function(e,t){return r.a.createElement(ge.a,Object.assign({},e,{ref:t}))}),Export:Object(n.forwardRef)(function(e,t){return r.a.createElement(ve.a,Object.assign({},e,{ref:t}))}),Filter:Object(n.forwardRef)(function(e,t){return r.a.createElement(be.a,Object.assign({},e,{ref:t}))}),FirstPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(he.a,Object.assign({},e,{ref:t}))}),LastPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(je.a,Object.assign({},e,{ref:t}))}),NextPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(ie.a,Object.assign({},e,{ref:t}))}),PreviousPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(le.a,Object.assign({},e,{ref:t}))}),ResetSearch:Object(n.forwardRef)(function(e,t){return r.a.createElement(ue.a,Object.assign({},e,{ref:t}))}),Search:Object(n.forwardRef)(function(e,t){return r.a.createElement(ke.a,Object.assign({},e,{ref:t}))}),SortArrow:Object(n.forwardRef)(function(e,t){return r.a.createElement(ae.a,Object.assign({},e,{ref:t}))}),ThirdStateCheck:Object(n.forwardRef)(function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))}),ViewColumn:Object(n.forwardRef)(function(e,t){return r.a.createElement(Ce.a,Object.assign({},e,{ref:t}))})},ze=Object(f.a)(function(e){return{root:{width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper,"& > * + *":{marginTop:e.spacing(2)}}}});function Ne(){ze();var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),i=Object(s.a)(l,2),u=i[0],f=(i[1],Object(n.useState)(!1)),d=Object(s.a)(f,2),m=d[0],g=d[1],p=function(){return g(!m)};Object(n.useEffect)(function(){!function(){b.apply(this,arguments)}()},[]);function b(){return(b=Object(w.a)(O.a.mark(function e(){return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:F.a.get("".concat(N,"ndr/files"),{headers:{Authorization:"Bearer ".concat(z)}}).then(function(e){console.log(e.data),c(e.data),console.log(e.data)}).catch(function(e){});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement(G.a,{variant:"contained",color:"primary",className:" float-right",startIcon:r.a.createElement(Y.a,{size:"10"}),style:{backgroundColor:"#014d88"},href:"https://ndr.phis3project.org.ng/Identity/Account/Login?ReturnUrl=%2F",target:"_blank"},r.a.createElement("span",null,"Upload to NDR")),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(V.a,{icons:Fe,title:"List of Filies Generated",columns:[{title:"Facility Name",field:"name",filtering:!1},{title:"Number of Files Generated",field:"files",filtering:!1},{title:"Date Last Generated",field:"date",type:"date",filtering:!1},{title:"Action",field:"actions",filtering:!1}],isLoading:u,data:a.map(function(e){return{name:e.facility,files:e.files,date:e.lastModified,actions:r.a.createElement(o.b,{to:"download/"+e.fileName,target:"_blank",download:!0},r.a.createElement(q.a,{title:"Download"},r.a.createElement(K.a,{"aria-label":"Download"},r.a.createElement(X.a,{color:"primary"}))))}}),options:{pageSizeOptions:[5,10,50,100,150,200],headerStyle:{backgroundColor:"#014d88",color:"#fff",margin:"auto"},filtering:!0,searchFieldStyle:{width:"300%",margingLeft:"250px"},exportButton:!1,searchFieldAlignment:"left"}}),r.a.createElement(I.a,{isOpen:m,toggle:p,backdrop:!1,fade:!0,size:"xl",style:{marginTop:"50px"}},r.a.createElement(Z.a,{toggle:p}),r.a.createElement(M.a,null,r.a.createElement("iframe",{style:{width:"100%",height:"100%",border:"none",margin:0,padding:0},src:"https://ndr.phis3project.org.ng/Identity/Account/Login?ReturnUrl=%2F"}),r.a.createElement("embed",{src:"https://ndr.phis3project.org.ng/",width:"100%",height:"1000",onerror:"alert('URL invalid !!');"}))))}function Te(e){var t=e.children,a=e.value,n=e.index,c=Object(u.a)(e,["children","value","index"]);return r.a.createElement(p.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"scrollable-force-tabpanel-".concat(n),"aria-labelledby":"scrollable-force-tab-".concat(n)},c),a===n&&r.a.createElement(b.a,{p:5},t))}function Pe(e){return{id:"scrollable-force-tab-".concat(e),"aria-controls":"scrollable-force-tabpanel-".concat(e)}}var De=Object(f.a)(function(e){return{root2:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,margin:e.spacing(7),bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:12},pos:{fontSize:11},cardContent:{padding:2},cardroot:{margin:e.spacing(1),height:"250px !important"}},alertmsge:{marginTop:e.spacing(2)},rootaccordia:{width:"100%"},accordiaheading:{fontSize:e.typography.pxToRem(15),fontWeight:e.typography.fontWeightRegular},allergiesroot:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}},checkboxroot:{display:"flex"},formControl:{margin:e.spacing(3)},root:{"& .MuiTextField-root":{margin:e.spacing(1),width:200}},formroot:{"& .MuiTextField-root":{margin:e.spacing(1),width:200}},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"33.33%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:e.spacing(1,2)},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}},inforoot:{width:"95%",margin:20,backgroundColor:"#eee"}}}),Ae=function(e){var t=De(),a=Object(n.useState)(0),c=Object(s.a)(a,2),l=c[0],o=c[1],i=function(e,t){var a=t,n=new RegExp("[?&]"+e+"=([^&#]*)","i").exec(a);return n?n[1]:null}("tab",e.location),u=null!==i?i:e.location;Object(n.useEffect)(function(){switch(u){case"generate":return o(0);case"download":return o(1);default:return o(0)}},[i]);return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.inforoot}),r.a.createElement(d.a,{position:"static",style:{backgroundColor:"#014d88"}},r.a.createElement(m.a,{value:l,onChange:function(e,t){o(t)},variant:"scrollable",scrollButtons:"on",indicatorColor:"secondary",textColor:"inherit","aria-label":"scrollable force tabs example"},r.a.createElement(g.a,Object.assign({className:t.title,label:"Generate Messages ",icon:r.a.createElement(E.b,null)},Pe(0))),r.a.createElement(g.a,Object.assign({className:t.title,label:"Download Files",icon:r.a.createElement(E.a,null)},Pe(1)))),r.a.createElement("div",null)),r.a.createElement(Te,{value:l,index:0},r.a.createElement(_,null)),r.a.createElement(Te,{value:l,index:1},r.a.createElement(Ne,null)))};function Le(){return r.a.createElement(o.a,null,r.a.createElement("div",null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/"},r.a.createElement(Ge,null)))))}function Ge(){return r.a.createElement(Ae,null)}a(444);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Le,null)),document.getElementById("root"))}},[[345,1,2]]]);
//# sourceMappingURL=main.8fe2f847.chunk.js.map